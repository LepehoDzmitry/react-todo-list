(this.webpackJsonptodo_list=this.webpackJsonptodo_list||[]).push([[0],{209:function(e,t,n){},215:function(e,t){},338:function(e,t,n){"use strict";n.r(t);var o=n(8),i=n(0),c=n.n(i),r=n(14),a=n.n(r),s=(n(209),n(192)),l=n(376),d=n(385),u=n(16),p=n(114),f=n(45),b=n(140),j=n.n(b),h=n(378),O=n(186),g=n.n(O),x=n(343),m=n(379),v=n(392),D=n(389),w=n(394),k=n(187),y=n.n(k),T=n(342),C=n(188),E=n.n(C),S="dialogReducer/CHANGE_DIALOG",_={toDoDialogOpen:{open:!1,type:"add",initData:{}}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(u.a)(Object(u.a)({},e),t.data);default:return e}},P=function(e){return function(t){t(function(e){return{type:S,data:e}}(e))}},N=n(18),R=n(80),A=n(34),W=n.n(A),B=n(67),L=new(n(184).a)("todos"),F="https://94f3c54f-f4cf-4daa-9c11-2b244cc7bd66-bluemix:34a04733cf953081674e8e3a104b39a87bdc597b1724c5c3b0450587864da1f6@94f3c54f-f4cf-4daa-9c11-2b244cc7bd66-bluemix.cloudantnosqldb.appdomain.cloud/todo",M=function(e){console.log(e)};!function(){var e={live:!0};L.replicate.to(F,e,M),L.replicate.from(F,e,M)}();var U=function(e){L.post(e)},H=function(e){L.put(e)},q=function(e){L.remove(e)},G="toDoReducer/ADD_TODO",J="toDoReducer/UPDATE_TODO_DND",V=[],X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return t.data.map((function(e){return e.doc}));case J:return e.slice().map((function(e){return e.id===t.data.id?t.data:e}));default:return e}},z=function(e){return{type:G,data:e}},$=function(e){return Object(B.a)(W.a.mark((function t(){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,H(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))},K=function(e){return{type:J,data:e}},Q=n(185),Y=function(e){return e.toDo.length>0?e.toDo.filter((function(e){return"positions"===e.id}))[0].positions.split(","):null},Z=function(e){return e.toDo.length>0?e.toDo.filter((function(e){return"positions"===e.id}))[0]:null},ee=Object(Q.a)([Y,function(e){return e.toDo.length>0?e.toDo.filter((function(e){return"positions"!==e.id})):null}],(function(e,t){return e?e.map((function(e){return t.filter((function(t){return t.id===e}))[0]})):null})),te=j()((function(e){return{header:{marginLeft:"1rem",marginRight:"auto"}}})),ne=Object(N.b)((function(e){return{toDos:ee(e),positions:Y(e),positionsObject:Z(e)}}),{changeDialog:P,updateToDo:$,deleteToDo:function(e){return Object(B.a)(W.a.mark((function t(){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))}})((function(e){var t=te(),n=e.toDos,i=e.toDo,c=e.index,r=e.updateToDo,a=e.deleteToDo,s=e.changeDialog,l=e.positions,d=e.positionsObject,b=function(){var e=l.slice(),t=e.indexOf(i.id);if(e.splice(t,1),i.isChecked)e.splice(0,0,i.id);else{var o=Math.min.apply(Math,Object(p.a)(n.filter((function(e){return e.isChecked})).map((function(t){return e.indexOf(t.id)}))));0===o?0===e.length?e.splice(0,0,i.id):e.splice(e.length,0,i.id):e.splice(o,0,i.id)}r(Object(u.a)(Object(u.a)({},i),{},{isChecked:!i.isChecked})),r(Object(u.a)(Object(u.a)({},d),{},{positions:e.join()}))},j=function(e){a(i),l.length>1?r(Object(u.a)(Object(u.a)({},d),{},{positions:l.filter((function(e){return e!==i.id})).join()})):a(d),e.stopPropagation()},O=function(e){s(Object(f.a)({},"toDoDialogOpen",{open:!0,type:"edit",initData:i})),e.stopPropagation()};return Object(o.jsx)(R.b,{draggableId:i.id,index:c,isDragDisabled:i.isChecked,children:function(e){return Object(o.jsxs)(v.a,Object(u.a)(Object(u.a)(Object(u.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:[Object(o.jsx)(h.a,{expandIcon:i.description&&Object(o.jsx)(g.a,{}),children:Object(o.jsxs)(w.a,{display:"flex",alignItems:"center",width:1,children:[Object(o.jsx)(D.a,{checked:i.isChecked,onChange:b,onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()}}),Object(o.jsx)(x.a,{variant:"h6",className:t.header,style:i.isChecked?{textDecoration:"line-through"}:{},children:i.header}),Object(o.jsx)(T.a,{onClick:j,children:Object(o.jsx)(y.a,{})}),Object(o.jsx)(T.a,{onClick:O,disabled:i.isChecked,children:Object(o.jsx)(E.a,{})})]})}),i.description&&Object(o.jsx)(m.a,{children:Object(o.jsx)(x.a,{children:i.description})})]}))}})})),oe=Object(N.b)((function(e){return{toDos:ee(e),positions:Y(e),positionsObject:Z(e)}}),{updateToDoDND:function(e){return function(){var t=Object(B.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(K(e)),t.next=4,H(e);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.toDos,n=e.positions,i=e.positionsObject,c=e.updateToDoDND;return Object(o.jsx)(R.a,{onDragEnd:function(e){var o=e.destination,r=e.source,a=e.draggableId;if(o&&(o.droppableId!==r.droppableId||o.index!==r.index)){var s=n.slice();s.splice(r.index,1);var l=Math.min.apply(Math,Object(p.a)(t.filter((function(e){return e.isChecked})).map((function(e){return s.indexOf(e.id)}))));s.splice(o.index>l?l:o.index,0,a),c(Object(u.a)(Object(u.a)({},i),{},{positions:s.join()}))}},children:Object(o.jsx)(R.c,{droppableId:"todo",children:function(e){return Object(o.jsxs)(w.a,Object(u.a)(Object(u.a)({ref:e.innerRef},e.droppableProps),{},{children:[t.map((function(e,t){return Object(o.jsx)(ne,{toDo:e,index:t},e.id)})),e.placeholder]}))}})})})),ie=n(384),ce=n(190),re=n.n(ce),ae=n(382),se=n(383),le=n(388),de=n(387),ue=n(380),pe=n(381),fe=n(193),be=n(386),je=function(e){var t=e.label,n=e.input,i=e.type,c=e.meta,r=c.touched,a=c.invalid,s=c.error,l=Object(fe.a)(e,["label","input","type","meta"]);return Object(o.jsx)(be.a,Object(u.a)(Object(u.a)({label:t,placeholder:t,type:i,fullWidth:!0,error:r&&a,helperText:r&&s},n),l))},he=Object(ue.a)((function(e){return{root:{width:"100%",height:"100%"},paperRoot:{width:"18rem",padding:"1rem"},marginBottom:{marginBottom:"1rem"}}})),Oe=Object(de.a)({form:"toDoForm",validate:function(e){var t={};return["header"].forEach((function(n){e[n]||(t[n]="Required")})),t}})((function(e){var t=he(),n=e.type,i=e.handleSubmit,c=e.valid,r=e.error,a=e.pristine,s=e.submitting;return Object(o.jsxs)("form",{onSubmit:i,children:[r&&Object(o.jsx)(x.a,{color:"error",className:t.marginBottom,children:r}),Object(o.jsx)(le.a,{name:"header",component:je,label:"Header",className:t.marginBottom}),Object(o.jsx)(le.a,{name:"description",component:je,label:"Description",multiline:!0,className:t.marginBottom}),Object(o.jsx)(pe.a,{color:"primary",type:"submit",fullWidth:!0,disabled:a||s||!c,children:"add"===n?"Add":"Edit"})]})})),ge=n(393),xe=function(e,t){return e.dialog[t]},me="toDoDialogOpen",ve=Object(N.b)((function(e){return{dialog:xe(e,me),positions:Y(e),positionsObject:Z(e)}}),{changeDialog:P,addToDo:function(e){return Object(B.a)(W.a.mark((function t(){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,U(e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))},updateToDo:$})((function(e){var t=e.dialog,n=e.positions,i=e.positionsObject,c=e.changeDialog,r=e.addToDo,a=e.updateToDo,s=function(){c(Object(f.a)({},me,{open:!1}))};return Object(o.jsxs)(ge.a,{open:t.open,onClose:s,"aria-labelledby":"form-dialog-title",children:[Object(o.jsx)(ae.a,{id:"form-dialog-title",children:"ToDo"}),Object(o.jsx)(se.a,{children:Object(o.jsx)(Oe,{onSubmit:function(e){if("add"===t.type){var o=(new Date).toISOString(),c=[];i&&(c=n.slice()).splice(0,0,o),r(Object(u.a)(Object(u.a)({},e),{},{id:o,isChecked:!1})),r(i?Object(u.a)(Object(u.a)({},i),{},{positions:c.join()}):{id:"positions",positions:o})}else"edit"===t.type&&a(e);s()},initialValues:t.initData,type:t.type})})]})})),De=Object(N.b)(null,{changeDialog:P})((function(e){var t=e.changeDialog;return Object(o.jsxs)(w.a,{my:3,display:"flex",justifyContent:"center",alignItems:"center",children:[Object(o.jsx)(x.a,{variant:"h4",component:"h2",align:"center",display:"inline",children:"React ToDo list"}),Object(o.jsx)(w.a,{ml:4,children:Object(o.jsx)(ie.a,{size:"small",color:"secondary","aria-label":"add",display:"inline",onClick:function(){t(Object(f.a)({},"toDoDialogOpen",{open:!0,type:"add",initData:{}}))},children:Object(o.jsx)(re.a,{})})}),Object(o.jsx)(ve,{})]})})),we=Object(N.b)((function(e){return{toDos:ee(e)}}),{getAllToDo:function(){return function(){var e=Object(B.a)(W.a.mark((function e(t){return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof t){e.next=9;break}return e.prev=1,e.next=4,L.allDocs({include_docs:!0,descending:!0}).then((function(e){t(z(e.rows))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.toDos,n=e.getAllToDo;return Object(i.useEffect)((function(){n(),L.changes({since:"now",live:!0}).on("change",n)}),[]),Object(o.jsxs)(d.a,{children:[Object(o.jsx)(De,{}),!!t&&Object(o.jsx)(oe,{})]})})),ke=n(13),ye=n(191),Te=n(391),Ce=Object(ke.c)({form:Te.a,toDo:X,dialog:I}),Ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ke.d,Se=Object(ke.e)(Ce,Ee(Object(ke.a)(ye.a))),_e=Object(s.a)({palette:{primary:{main:"#303030"},secondary:{main:"#ff3d00"}}});var Ie=function(){return Object(o.jsx)(l.a,{theme:_e,children:Object(o.jsx)(N.a,{store:Se,children:Object(o.jsx)(we,{})})})},Pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,396)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),o(e),i(e),c(e),r(e)}))};a.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(Ie,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/react-todo-list",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/react-todo-list","/service-worker.js");Pe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ne(t,e)}))}}(),Re()}},[[338,1,2]]]);
//# sourceMappingURL=main.17cfd4f3.chunk.js.map